"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var lt=Object.defineProperty;var mt=(e,t)=>{for(var o in t)lt(e,o,{get:t[o],enumerable:!0})};var ut={};mt(ut,{ActiveEmoji:()=>at,Empty:()=>st,List:()=>rt,Loading:()=>nt,Root:()=>Ge,Search:()=>Ze,SkinTone:()=>ct,SkinToneSelector:()=>it,Viewport:()=>Xe});var _react = require('react');var Z="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif",W=["none","light","medium-light","medium","medium-dark","dark"];function X(e){return e.charAt(0).toUpperCase()+e.slice(1)}var F=2,T=null;function ae(e){try{T??=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch (e2){}if(!T||(queueMicrotask(()=>{T&&(T=null)}),T.canvas.width=F,T.canvas.height=F,T.font=`2px ${Z}`,T.textBaseline="middle",T.measureText(e).width>=F*2))return!1;T.fillStyle="#00f",T.fillText(e,0,0);let t=T.getImageData(0,0,F,F).data;T.clearRect(0,0,F,F),T.fillStyle="#f00",T.fillText(e,0,0);let o=T.getImageData(0,0,F,F).data;for(let r=0;r<F*F*4;r+=4)if(t[r]!==o[r]||t[r+1]!==o[r+1]||t[r+2]!==o[r+2])return!1;return!0}function ce(e,t,o){try{let r=e.getItem(t);if(!r)throw new Error(`No value found for "${t}".`);let i=JSON.parse(r);return o(i)}catch (e3){return null}}function ue(e,t,o){e.setItem(t,JSON.stringify(o))}function le(e){return t=>t===void 0?void 0:e(t)}function me(e){return t=>t===null?null:e(t)}function P(e){if(typeof e!="string")throw new Error;return e}function B(e){if(typeof e!="number")throw new Error;return e}function de(e){if(typeof e!="boolean")throw new Error;return e}function V(e){return t=>{if(typeof t!="object"||t===null)throw new Error;let o={};for(let r in e){let i=t[r];i===void 0&&e[r](void 0),o[r]=e[r](i)}return o}}function Q(e){return t=>{if(!Array.isArray(t))throw new Error;return t.length>0&&e(t[0]),t}}var ye=(e,t)=>`${e}/${t}/data.json`,Se=(e,t)=>`${e}/${t}/messages.json`,ft=["bn","da","de","en-gb","en","es-mx","es","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","vi","zh-hant","zh"],he="en",ve=e=>`frimousse/data/${e}`,je="frimousse/metadata";async function ke(e,t){try{return(await fetch(e,{method:"HEAD",signal:t})).headers.get("etag")}catch (e4){return null}}async function gt(e,t,o){let[{emojis:r,emojisEtag:i},{messages:a,messagesEtag:s}]=await Promise.all([fetch(ye(e,t),{signal:o}).then(async c=>({emojis:await c.json(),emojisEtag:c.headers.get("etag")})),fetch(Se(e,t),{signal:o}).then(async c=>({messages:await c.json(),messagesEtag:c.headers.get("etag")}))]);return{emojis:r,messages:a,emojisEtag:i,messagesEtag:s}}async function pt(e,t,o){let[r,i]=await Promise.all([ke(ye(e,t),o),ke(Se(e,t),o)]);return{emojisEtag:r,messagesEtag:i}}function Et(e){return e.skins?e.skins.filter(o=>typeof o.tone=="number").reduce((o,r)=>{let i=W[r.tone];return o[i]=r.emoji,o},{}):void 0}async function we(e,t,o){let{emojis:r,emojisEtag:i,messages:a,messagesEtag:s}=await gt(e,t,o),c=a.subgroups.find(l=>l.key==="country-flag"||l.key==="subdivision-flag"),m=a.groups.filter(l=>l.key!=="component"),n=r.filter(l=>"group"in l),d=m.map(l=>({index:l.order,label:X(l.message)})),u=a.skinTones.reduce((l,g)=>(l[g.key]=X(g.message),l),{}),f=n.map(l=>({emoji:l.emoji,category:l.group,version:l.version,label:X(l.label),tags:_nullishCoalesce(l.tags, () => ([])),countryFlag:c&&l.subgroup===c.order||void 0,skins:Et(l)})),p={locale:t,emojis:f,categories:d,skinTones:u};return ue(localStorage,ve(t),{data:p,metadata:{emojisEtag:i,messagesEtag:s}}),p}function ht(e,t){let o=new Map;for(let s of e)o.has(s.version)||o.set(s.version,s.emoji);let r=[...o.keys()].sort((s,c)=>c-s),i=_nullishCoalesce(r[0], () => (0)),a=ae("\u{1F1EA}\u{1F1FA}");if(typeof t=="number")return{emojiVersion:t,countryFlags:a};for(let s of r){let c=o.get(s);if(ae(c))return{emojiVersion:s,countryFlags:a}}return{emojiVersion:i,countryFlags:a}}var jt=V({emojiVersion:B,countryFlags:de}),kt=V({data:V({locale:P,emojis:Q(V({emoji:P,category:B,label:P,version:B,tags:Q(P),countryFlag:le(de),skins:le(V({light:P,"medium-light":P,medium:P,"medium-dark":P,dark:P}))})),categories:Q(V({index:B,label:P})),skinTones:V({light:P,"medium-light":P,medium:P,"medium-dark":P,dark:P})}),metadata:V({emojisEtag:me(P),messagesEtag:me(P)})});async function Pe({locale:e,emojiVersion:t,emojibaseUrl:o,signal:r}){let i=typeof o=="string"?o:`https://cdn.jsdelivr.net/npm/emojibase-data@${typeof t=="number"?Math.floor(t):"latest"}`,a=ce(sessionStorage,je,jt),s=ce(localStorage,ve(e),kt),c;if(!s)c=await we(i,e,r);else if(a)c=s.data;else try{let{emojisEtag:n,messagesEtag:d}=await pt(i,e,r);c=!n||!d||n!==s.metadata.emojisEtag||d!==s.metadata.messagesEtag?await we(i,e,r):s.data}catch (e5){c=s.data}a??=ht(c.emojis,t),ue(sessionStorage,je,a);let m=c.emojis.filter(n=>{let d=n.version<=a.emojiVersion;return n.countryFlag?d&&a.countryFlags:d});return{locale:e,emojis:m,categories:c.categories,skinTones:c.skinTones}}function fe(e){return ft.includes(e)?e:(console.warn(`Locale "${e}" is not supported, using "${he}" instead.`),he)}function ge(e){return W.includes(e)?e:(console.warn(`Skin tone "${e}" is not valid, using "none" instead.`),"none")}function be(e,t){let o=[];if(t<=0)return o;for(let r=0,i=e.length;r<i;r+=t)o.push(e.slice(r,r+t));return o}function wt(e,t,o){if(!t&&!o)return e;let r=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _2 => _2.toLowerCase, 'call', _3 => _3(), 'access', _4 => _4.trim, 'call', _5 => _5()]), () => ("")),i=new WeakMap;return e.filter(a=>{if(_optionalChain([o, 'optionalAccess', _6 => _6.includes, 'call', _7 => _7(a.emoji)]))return!1;if(r!==""){let s=0;a.label.toLowerCase().includes(r)&&(s+=10);for(let c of a.tags)c.toLowerCase().includes(r)&&(s+=1);return s>0?(i.set(a,s),!0):!1}return!0}).sort((a,s)=>(_nullishCoalesce(i.get(s), () => (0)))-(_nullishCoalesce(i.get(a), () => (0))))}function Te(e,t,o,r,i){let a=wt(e.emojis,r,i),s=[],c=[],m=[],n={},d=0,u=0;for(let f of a)n[f.category]||(n[f.category]=[]),n[f.category].push({emoji:o&&o!=="none"&&f.skins?f.skins[o]:f.emoji,label:f.label});for(let f of e.categories){let p=n[f.index];if(!p||p.length===0)continue;let l=be(Array.from(p),t).map(g=>({categoryIndex:d,emojis:g}));s.push(...l),c.push({label:f.label,rowsCount:l.length,startRowIndex:u}),m.push(u),d++,u+=l.length}return{count:a.length,categories:c,categoriesStartRowIndices:m,rows:s,skinTones:e.skinTones}}var _jsxruntime = require('react/jsx-runtime');function Ce(e){let t={},o=null,r=null,i=new Set,a=()=>{if(o){t=o,o=null;for(let n of i)n(t)}r=null},s=()=>_nullishCoalesce(o, () => (t)),c=n=>{o??=t,Object.assign(o,typeof n=="function"?n(s()):n),r||(r=requestAnimationFrame(a))},m=n=>(i.add(n),()=>i.delete(n));return t=e(c,s),{get:s,set:c,subscribe:m}}function Re(e){let[t]=_react.useState.call(void 0, e);return t}function Le(e){let t=_react.createContext.call(void 0, null);return{useStore:()=>{let i=_react.useContext.call(void 0, t);if(!i)throw new Error(e);return i},Provider:({store:i,children:a})=>_jsxruntime.jsx.call(void 0, t.Provider,{value:i,children:a})}}function C(e,t,o=Object.is){let[r,i]=_react.useState.call(void 0, ()=>t(e.get()));return _react.useEffect.call(void 0, ()=>e.subscribe(()=>{let a=t(e.get());i(s=>o(s,a)?s:a)}),[e,t,o]),_react.useDebugValue.call(void 0, r),r}function A(e,t,o){let r=_react.useCallback.call(void 0, i=>i[t],[t]);return C(e,r,o)}var He=2;function Ie(e,t,o,r,i,a){let s=0;return Ce((c,m)=>({locale:t,columns:o,sticky:r,skinTone:i,excludedEmojis:a,onEmojiSelect:e,data:null,search:"",interaction:"none",activeColumnIndex:0,activeRowIndex:0,rowHeight:null,categoryHeaderHeight:null,viewportWidth:null,viewportHeight:null,viewportCurrentCategoryIndex:null,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0,rootRef:null,searchRef:null,viewportRef:null,listRef:null,updateViewportState:n=>{let d=m(),u=_nullishCoalesce(_optionalChain([n, 'optionalAccess', _8 => _8.data]), () => (d.data)),f=_nullishCoalesce(_optionalChain([n, 'optionalAccess', _9 => _9.categoryHeaderHeight]), () => (d.categoryHeaderHeight)),p=_nullishCoalesce(_optionalChain([n, 'optionalAccess', _10 => _10.rowHeight]), () => (d.rowHeight)),l=_nullishCoalesce(_optionalChain([n, 'optionalAccess', _11 => _11.viewportHeight]), () => (d.viewportHeight));if(!u||u.rows.length===0||!f||!p||!l)return c({...n,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0});let g=0,j=0;for(let I of u.categories)if(j++*f+I.startRowIndex*p<s)g+=f;else break;let y=u.categories.length*f+u.rows.length*p,k=Math.floor(He*p/2),H=Math.ceil(He*p/2),M=Math.min(s-g-k,y-l),_=M+l+H,E=Math.max(0,Math.floor(M/p)),S=Math.min(u.rows.length-1,Math.ceil(_/p)),v=_optionalChain([u, 'access', _12 => _12.rows, 'access', _13 => _13[E], 'optionalAccess', _14 => _14.categoryIndex]);return c(v===void 0&&n?n:{...n,viewportStartCategoryIndex:v,viewportStartRowIndex:E,viewportEndRowIndex:S})},onDataChange:n=>{m().updateViewportState({data:n,activeColumnIndex:0,activeRowIndex:0})},onSearchChange:n=>{c({search:n,interaction:n?"keyboard":"none"})},onActiveEmojiChange:(n,d,u)=>{if(c({interaction:n,activeColumnIndex:d,activeRowIndex:u}),n!=="keyboard")return;let{listRef:f,viewportRef:p,sticky:l,rowHeight:g,viewportHeight:j,categoryHeaderHeight:y}=m(),k=_optionalChain([f, 'optionalAccess', _15 => _15.current]),H=_optionalChain([p, 'optionalAccess', _16 => _16.current]);if(!k||!H||!g||!y||!j)return;let M=u;M===0&&H.scrollTo({top:0,behavior:"instant"});let _=k.querySelector(`[aria-rowindex="${M}"]`);if(!(_ instanceof HTMLElement))return;let E=_.offsetTop,S=getComputedStyle(_),v=Number.parseFloat(S.scrollMarginTop),I=Number.parseFloat(S.scrollMarginBottom),R=s+v;l&&E<s+j/2&&(R+=y);let N=R+j-I;(E<R||E+g>N)&&H.scrollTo({top:Math.max(E<R+y?E-Math.max(l?y:0,v):E-j+g+I,0),behavior:"instant"})},onActiveEmojiReset:()=>{c({interaction:"none",activeColumnIndex:0,activeRowIndex:0})},onRowHeightChange:n=>{m().updateViewportState({rowHeight:n})},onCategoryHeaderHeightChange:n=>{m().updateViewportState({categoryHeaderHeight:n})},onViewportSizeChange:(n,d)=>{m().updateViewportState({viewportWidth:n,viewportHeight:d})},onViewportScroll:n=>{s=n,m().updateViewportState()}}))}var{useStore:x,Provider:De}=Le("EmojiPicker.Root is missing.");function Ae(e){return e.search}function z(e){return e.interaction==="none"?void 0:_optionalChain([e, 'access', _17 => _17.data, 'optionalAccess', _18 => _18.rows, 'access', _19 => _19[e.activeRowIndex], 'optionalAccess', _20 => _20.emojis, 'access', _21 => _21[e.activeColumnIndex]])}function $e(e){return e.data===void 0||typeof _optionalChain([e, 'access', _22 => _22.data, 'optionalAccess', _23 => _23.count])=="number"&&e.data.count===0}function Me(e){return e.data===null||e.viewportHeight===null||e.rowHeight===null||e.categoryHeaderHeight===null}function pe(e){return _optionalChain([e, 'access', _24 => _24.data, 'optionalAccess', _25 => _25.rows, 'access', _26 => _26.length])}function Fe(e){return _optionalChain([e, 'access', _27 => _27.data, 'optionalAccess', _28 => _28.categories, 'access', _29 => _29.length])}function Ve(e){return _optionalChain([e, 'access', _30 => _30.data, 'optionalAccess', _31 => _31.categoriesStartRowIndices])}function Oe(e){return _optionalChain([e, 'access', _32 => _32.data, 'optionalAccess', _33 => _33.skinTones])}function Ee(e,t){return _optionalChain([e, 'optionalAccess', _34 => _34.emoji])===_optionalChain([t, 'optionalAccess', _35 => _35.emoji])}function _e(e,t){return _optionalChain([e, 'optionalAccess', _36 => _36.categoryIndex])!==_optionalChain([t, 'optionalAccess', _37 => _37.categoryIndex])||_optionalChain([e, 'optionalAccess', _38 => _38.emojis, 'access', _39 => _39.length])!==_optionalChain([t, 'optionalAccess', _40 => _40.emojis, 'access', _41 => _41.length])?!1:!!_optionalChain([e, 'optionalAccess', _42 => _42.emojis, 'access', _43 => _43.every, 'call', _44 => _44((o,r)=>Ee(o,_optionalChain([t, 'optionalAccess', _45 => _45.emojis, 'access', _46 => _46[r]])))])}var K="\u200D",Ne=/\p{Emoji_Modifier_Base}/u,xt=/\uFE0F$/,Ct=/\u{1F3FB}|\u{1F3FC}|\u{1F3FD}|\u{1F3FE}|\u{1F3FF}/gu,Rt={light:"\u{1F3FB}","medium-light":"\u{1F3FC}",medium:"\u{1F3FD}","medium-dark":"\u{1F3FE}",dark:"\u{1F3FF}"};function Lt(e,t){if(!e.split(K).some(r=>Ne.test(r)))return e;let o=e.split(K).map(r=>r.replace(Ct,"")).join(K);return t==="none"?o:o.split(K).map((r,i,a)=>{let s=a.length>1;return!Ne.test(r)||s&&r==="\u{1F91D}"?r:r.replace(xt,"")+Rt[t]}).join(K)}function We(e){return W.map(t=>({skinTone:t,emoji:Lt(e,t)}))}function ee(){let e=x(),t=C(e,z,Ee);return _react.useDeferredValue.call(void 0, t)}function te(e="\u270B"){let t=x(),o=A(t,"skinTone"),r=_react.useMemo.call(void 0, ()=>We(e),[e]),i=_react.useCallback.call(void 0, a=>{t.set({skinTone:a})},[]);return[o,i,r]}function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||typeof t!="object"||e===null||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let o=Object.keys(e),r=Object.keys(t);return o.length!==r.length?!1:o.every(i=>i in t&&e[i]===t[i])}function Be(...e){}function ze(e,t){let o=null;if(typeof window.requestIdleCallback=="function")o=window.requestIdleCallback(e,t);else{let r=Date.now();o=window.setTimeout(()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,(_nullishCoalesce(_optionalChain([t, 'optionalAccess', _47 => _47.timeout]), () => (50)))-(Date.now()-r))})},10)}return()=>{typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(o):window.clearTimeout(o)}}var L=typeof window<"u"?_react.useLayoutEffect:_react.useEffect;function Ke(e){let t=_react.useRef.call(void 0, e);return L(()=>{t.current=e}),_react.useCallback.call(void 0, (...o)=>t.current(...o),[])}function Ot({emojiVersion:e,emojibaseUrl:t}){let[o,r]=_react.useState.call(void 0, void 0),i=x(),a=A(i,"locale"),s=A(i,"columns"),c=A(i,"skinTone"),m=A(i,"search"),n=A(i,"excludedEmojis");return _react.useEffect.call(void 0, ()=>{let d=new AbortController,u=d.signal;return Pe({locale:a,emojiVersion:e,emojibaseUrl:t,signal:u}).then(f=>{r(f)}).catch(f=>{u.aborted||console.error(f)}),()=>{d.abort()}},[e,t,a]),_react.useEffect.call(void 0, ()=>{if(o)return ze(()=>{i.get().onDataChange(Te(o,s,c,m,n))},{timeout:100})},[o,s,c,m,n]),null}var Ge=_react.forwardRef.call(void 0, ({locale:e="en",columns:t=9,skinTone:o="none",onEmojiSelect:r=Be,emojiVersion:i,emojibaseUrl:a,onFocusCapture:s,onBlurCapture:c,children:m,style:n,sticky:d=!0,excludedEmojis:u,...f},p)=>{let l=Ke(r),g=Re(()=>Ie(l,fe(e),t,d,ge(o),u)),[j,y]=_react.useState.call(void 0, !1),k=_react.useRef.call(void 0, null),H=_react.useCallback.call(void 0, E=>{E&&(k.current=E,g.set({rootRef:k}))},[]);L(()=>{g.set({locale:fe(e)})},[e]),L(()=>{g.set({columns:t})},[t]),L(()=>{g.set({sticky:d})},[d]),L(()=>{g.set({skinTone:ge(o)})},[o]),L(()=>{g.set({excludedEmojis:u})},[u]);let M=_react.useCallback.call(void 0, E=>{_optionalChain([s, 'optionalCall', _48 => _48(E)]);let{searchRef:S,viewportRef:v}=g.get(),I=E.target===_optionalChain([S, 'optionalAccess', _49 => _49.current])||E.target.hasAttribute("frimousse-search"),R=E.target===_optionalChain([v, 'optionalAccess', _50 => _50.current])||E.target.hasAttribute("frimousse-viewport");E.isDefaultPrevented()||(y(I||R),E.isDefaultPrevented()||(y(I||R),R?g.get().onActiveEmojiChange("keyboard",0,0):I&&g.get().search===""&&g.set({interaction:"none"})))},[s]),_=_react.useCallback.call(void 0, E=>{_optionalChain([c, 'optionalCall', _51 => _51(E)]),!E.isDefaultPrevented()&&!E.currentTarget.contains(E.relatedTarget)&&y(!1)},[c]);return L(()=>{j||g.get().onActiveEmojiReset()},[j]),_react.useImperativeHandle.call(void 0, p,()=>k.current),_react.useEffect.call(void 0, ()=>{if(!j)return;function E(S){if(S.defaultPrevented||!S.key.startsWith("Arrow")&&S.key!=="Enter")return;let{data:v,onEmojiSelect:I,onActiveEmojiChange:R,interaction:N,activeColumnIndex:q,activeRowIndex:G}=g.get();if(S.key==="Enter"){let b=z(g.get());b&&(S.preventDefault(),I(b))}if(S.key.startsWith("Arrow")){let b=q,w=G;if(S.preventDefault(),N!=="none"){if(_optionalChain([v, 'optionalAccess', _52 => _52.rows])&&v.rows.length>0)switch(S.key){case"ArrowLeft":{if(b===0){let D=w-1,se=v.rows[D];se&&(w=D,b=se.emojis.length-1)}else b-=1;break}case"ArrowRight":{if(b===v.rows[w].emojis.length-1){let D=w+1;v.rows[D]&&(w=D,b=0)}else b+=1;break}case"ArrowUp":{let D=v.rows[w-1];D&&(w-=1,D.emojis[b]||(b=D.emojis.length-1));break}case"ArrowDown":{let D=v.rows[w+1];D&&(w+=1,D.emojis[b]||(b=D.emojis.length-1));break}}R("keyboard",b,w)}else R("keyboard",0,0)}}return document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[j]),L(()=>{let E=null,S=null,v=null,I=null,R=g.subscribe(w=>{k.current&&(E!==w.viewportWidth&&(E=w.viewportWidth,k.current.style.setProperty("--frimousse-viewport-width",`${w.viewportWidth}px`)),S!==w.viewportHeight&&(S=w.viewportHeight,k.current.style.setProperty("--frimousse-viewport-height",`${w.viewportHeight}px`)),v!==w.rowHeight&&(v=w.rowHeight,k.current.style.setProperty("--frimousse-row-height",`${w.rowHeight}px`)),I!==w.categoryHeaderHeight&&(I=w.categoryHeaderHeight,k.current.style.setProperty("--frimousse-category-header-height",`${w.categoryHeaderHeight}px`)))}),{viewportWidth:N,viewportHeight:q,rowHeight:G,categoryHeaderHeight:b}=g.get();return N&&k.current.style.setProperty("--frimousse-viewport-width",`${N}px`),q&&k.current.style.setProperty("--frimousse-viewport-height",`${q}px`),G&&k.current.style.setProperty("--frimousse-row-height",`${G}px`),b&&k.current.style.setProperty("--frimousse-category-header-height",`${b}px`),R},[]),_jsxruntime.jsx.call(void 0, "div",{"data-focused":j?"":void 0,"frimousse-root":"",onBlurCapture:_,onFocusCapture:M,...f,ref:H,style:{"--frimousse-emoji-font":Z,...n},children:_jsxruntime.jsxs.call(void 0, De,{store:g,children:[_jsxruntime.jsx.call(void 0, Ot,{emojibaseUrl:a,emojiVersion:i}),m]})})}),Ze=_react.forwardRef.call(void 0, ({value:e,defaultValue:t,onChange:o,...r},i)=>{let a=x(),s=_react.useRef.call(void 0, null),c=_react.useCallback.call(void 0, u=>{u&&(s.current=u,a.set({searchRef:s}))},[]),m=typeof e=="string",n=_react.useRef.call(void 0, m);_react.useEffect.call(void 0, ()=>{process.env.NODE_ENV!=="production"&&n.current!==m&&console.warn(`EmojiPicker.Search is changing from ${n?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}.`),n.current=m},[m]),L(()=>{a.set({search:typeof e=="string"?e:typeof t=="string"?t:""})},[]),L(()=>{typeof e=="string"&&a.get().onSearchChange(e)},[e]);let d=_react.useCallback.call(void 0, u=>{_optionalChain([o, 'optionalCall', _53 => _53(u)]),u.isDefaultPrevented()||a.get().onSearchChange(u.target.value)},[o]);return _react.useImperativeHandle.call(void 0, i,()=>s.current),_jsxruntime.jsx.call(void 0, "input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",enterKeyHint:"done","frimousse-search":"",placeholder:"Search\u2026",spellCheck:!1,type:"search",...r,defaultValue:t,onChange:d,ref:c,value:e})}),_t=_react.memo.call(void 0, ()=>{let e=ee();return e?_jsxruntime.jsx.call(void 0, "div",{"aria-live":"polite",style:{border:0,clip:"rect(0, 0, 0, 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1,wordWrap:"normal"},children:e.label}):null}),Xe=_react.forwardRef.call(void 0, ({children:e,onScroll:t,onKeyDown:o,style:r,...i},a)=>{let s=x(),c=_react.useRef.call(void 0, null),m=_react.useCallback.call(void 0, f=>{f&&(c.current=f,s.set({viewportRef:c}))},[]),n=C(s,pe),d=C(s,Fe),u=_react.useCallback.call(void 0, f=>{_optionalChain([t, 'optionalCall', _54 => _54(f)]),s.get().onViewportScroll(f.currentTarget.scrollTop)},[t]);return L(()=>{if(!c.current)return;let f=new ResizeObserver(([p])=>{let l=_nullishCoalesce(_optionalChain([p, 'optionalAccess', _55 => _55.borderBoxSize, 'access', _56 => _56[0], 'optionalAccess', _57 => _57.inlineSize]), () => (0)),g=_nullishCoalesce(_optionalChain([p, 'optionalAccess', _58 => _58.borderBoxSize, 'access', _59 => _59[0], 'optionalAccess', _60 => _60.blockSize]), () => (0)),{onViewportSizeChange:j,viewportHeight:y,viewportWidth:k}=s.get();(y!==g||k!==l)&&j(l,g)});return f.observe(c.current),s.get().onViewportSizeChange(c.current.offsetWidth,c.current.clientHeight),()=>{f.disconnect()}},[]),_react.useImperativeHandle.call(void 0, a,()=>c.current),_jsxruntime.jsxs.call(void 0, "div",{"frimousse-viewport":"",...i,onScroll:u,ref:m,style:{position:"relative",boxSizing:"border-box",contain:"layout paint",containIntrinsicSize:typeof n=="number"&&typeof d=="number"?`var(--frimousse-viewport-width, auto) calc(${n} * var(--frimousse-row-height) + ${d} * var(--frimousse-category-header-height))`:void 0,overflowY:"auto",overscrollBehavior:"contain",scrollbarGutter:"stable",willChange:"scroll-position",...r},children:[_jsxruntime.jsx.call(void 0, _t,{}),e]})});function Qe(e,t,o){return{emoji:{...e,isActive:o},role:"gridcell","aria-colindex":t,"aria-selected":o||void 0,"aria-label":e.label,"data-active":o?"":void 0,"frimousse-emoji":"",style:{fontFamily:"var(--frimousse-emoji-font)"},tabIndex:-1}}function et(e,t=!1){return{role:t?void 0:"row","aria-rowindex":t?void 0:e,"frimousse-row":"",style:{contain:t?void 0:"content",height:t?void 0:"var(--frimousse-row-height)",display:"flex"}}}function tt(e,t){return{"frimousse-category":"",style:{contain:"content",top:t?`calc(${e} * var(--frimousse-category-header-height) + ${t.startRowIndex} * var(--frimousse-row-height))`:void 0,height:t?`calc(var(--frimousse-category-header-height) + ${t.rowsCount} * var(--frimousse-row-height))`:void 0,width:"100%",pointerEvents:"none",position:"absolute"}}}function ot(e,t=!1,o=!0){return{category:e,"frimousse-category-header":"",style:{contain:t?void 0:"layout paint",height:t?void 0:"var(--frimousse-category-header-height)",pointerEvents:"auto",position:o?"sticky":void 0,top:0}}}function Ue(e,t,o,r){return{"frimousse-list-sizer":"",style:{position:"relative",boxSizing:"border-box",height:`calc(${e} * var(--frimousse-row-height) + ${t} * var(--frimousse-category-header-height))`,paddingTop:`calc(${o} * var(--frimousse-row-height) + ${r} * var(--frimousse-category-header-height))`}}}function Ye(e,t,o){return{"aria-colcount":e,"aria-rowcount":t,"frimousse-list":"",style:{"--frimousse-list-columns":e,...o},role:"grid"}}function Nt(e){e.preventDefault()}var Wt=_react.memo.call(void 0, ({Emoji:e,emoji:t,columnIndex:o,rowIndex:r})=>{let i=x(),a=C(i,n=>_optionalChain([z, 'call', _61 => _61(n), 'optionalAccess', _62 => _62.emoji])===t.emoji),s=_react.useCallback.call(void 0, ()=>{i.get().onEmojiSelect(t)},[t]),c=_react.useCallback.call(void 0, ()=>{i.get().onActiveEmojiChange("pointer",o,r)},[o,r]),m=_react.useCallback.call(void 0, ()=>{i.get().onActiveEmojiReset()},[]);return _jsxruntime.jsx.call(void 0, e,{...Qe(t,o,a),onClick:s,onPointerDown:Nt,onPointerEnter:c,onPointerLeave:m})}),Bt=_react.memo.call(void 0, ({Row:e,Emoji:t,rowIndex:o})=>{let r=x(),i=C(r,a=>_optionalChain([a, 'access', _63 => _63.data, 'optionalAccess', _64 => _64.rows, 'access', _65 => _65[o]]),_e);return i?_jsxruntime.jsx.call(void 0, e,{...et(o),children:i.emojis.map((a,s)=>_jsxruntime.jsx.call(void 0, Wt,{columnIndex:s,Emoji:t,emoji:a,rowIndex:o},a.label))}):null}),zt=_react.memo.call(void 0, ({CategoryHeader:e,categoryIndex:t})=>{let o=x(),r=C(o,a=>_optionalChain([a, 'access', _66 => _66.data, 'optionalAccess', _67 => _67.categories, 'access', _68 => _68[t]]),oe),i=A(o,"sticky");return r?_jsxruntime.jsx.call(void 0, "div",{...tt(t,r),children:_jsxruntime.jsx.call(void 0, e,{...ot({label:r.label},!1,i)})}):null}),Je=_react.memo.call(void 0, ({CategoryHeader:e,Row:t,Emoji:o})=>{let r=_react.useRef.call(void 0, null),i=x(),a=A(i,"columns"),s=_react.useMemo.call(void 0, ()=>Array(a).fill({emoji:"\u{1F642}",label:""}),[a]),c=_react.useMemo.call(void 0, ()=>({label:"Category"}),[]),m=_react.useRef.call(void 0, null),n=_react.useRef.call(void 0, null);return L(()=>{let d=_optionalChain([r, 'access', _69 => _69.current, 'optionalAccess', _70 => _70.parentElement, 'optionalAccess', _71 => _71.parentElement]);if(!d||!m.current||!n.current)return;let u=new ResizeObserver(l=>{for(let g of l){let j=g.contentRect.height,{onRowHeightChange:y,onCategoryHeaderHeightChange:k,rowHeight:H,categoryHeaderHeight:M}=i.get();g.target===m.current&&H!==j&&y(j),g.target===n.current&&M!==j&&k(j)}});u.observe(d),u.observe(m.current),u.observe(n.current);let{onRowHeightChange:f,onCategoryHeaderHeightChange:p}=i.get();return f(m.current.clientHeight),p(n.current.clientHeight),()=>{u.disconnect()}},[]),_jsxruntime.jsxs.call(void 0, "div",{"aria-hidden":!0,ref:r,style:{height:0,visibility:"hidden"},children:[_jsxruntime.jsx.call(void 0, "div",{"frimousse-row-sizer":"",ref:m,children:_jsxruntime.jsx.call(void 0, t,{...et(-1,!0),children:s.map((d,u)=>_jsxruntime.jsx.call(void 0, o,{...Qe(d,u,!1)},u))})}),_jsxruntime.jsx.call(void 0, "div",{...tt(-1),children:_jsxruntime.jsx.call(void 0, "div",{"frimousse-category-header-sizer":"",ref:n,children:_jsxruntime.jsx.call(void 0, e,{...ot(c,!0)})})})]})});function Kt({category:e,...t}){return _jsxruntime.jsx.call(void 0, "div",{...t,children:e.label})}function Ut({emoji:e,...t}){return _jsxruntime.jsx.call(void 0, "button",{type:"button",...t,children:e.emoji})}function Yt({...e}){return _jsxruntime.jsx.call(void 0, "div",{...e})}var rt=_react.forwardRef.call(void 0, ({style:e,components:t,...o},r)=>{let i=x(),a=_react.useRef.call(void 0, null),s=_react.useCallback.call(void 0, y=>{y&&(a.current=y,i.set({listRef:a}))},[]),c=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _72 => _72.CategoryHeader]), () => (Kt)),m=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _73 => _73.Emoji]), () => (Ut)),n=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _74 => _74.Row]), () => (Yt)),d=A(i,"columns"),u=A(i,"viewportStartRowIndex"),f=A(i,"viewportEndRowIndex"),p=C(i,pe),l=C(i,Ve,oe),g=_react.useMemo.call(void 0, ()=>_nullishCoalesce(_optionalChain([l, 'optionalAccess', _75 => _75.filter, 'call', _76 => _76(y=>y<u), 'access', _77 => _77.length]), () => (0)),[l,u]),j=_nullishCoalesce(_optionalChain([l, 'optionalAccess', _78 => _78.length]), () => (0));return _react.useImperativeHandle.call(void 0, r,()=>a.current),!p||!l||j===0?_jsxruntime.jsx.call(void 0, "div",{...Ye(d,0,e),...o,children:_jsxruntime.jsx.call(void 0, "div",{...Ue(0,0,0,0),children:_jsxruntime.jsx.call(void 0, Je,{CategoryHeader:c,Emoji:m,Row:n})})}):_jsxruntime.jsx.call(void 0, "div",{...Ye(d,p,e),...o,ref:s,children:_jsxruntime.jsxs.call(void 0, "div",{...Ue(p,j,u,g),children:[_jsxruntime.jsx.call(void 0, Je,{CategoryHeader:c,Emoji:m,Row:n}),Array.from({length:f-u+1},(y,k)=>{let H=u+k,M=l.indexOf(H);return _jsxruntime.jsxs.call(void 0, _react.Fragment,{children:[M>=0&&_jsxruntime.jsx.call(void 0, "div",{style:{height:"var(--frimousse-category-header-height)"}}),_jsxruntime.jsx.call(void 0, Bt,{Emoji:m,Row:n,rowIndex:H})]},H)}),Array.from({length:j},(y,k)=>_jsxruntime.jsx.call(void 0, zt,{CategoryHeader:c,categoryIndex:k},k))]})})}),it=_react.forwardRef.call(void 0, ({emoji:e,onClick:t,"aria-label":o="Change skin tone",...r},i)=>{let a=x(),s=C(a,Oe,oe),[c,m,n]=te(e),d=_react.useMemo.call(void 0, ()=>Math.max(0,n.findIndex(j=>j.skinTone===c)),[c,n]),u=n[d],p=n[(d+1)%n.length].skinTone,l=p==="none"?void 0:_optionalChain([s, 'optionalAccess', _79 => _79[p]]),g=_react.useCallback.call(void 0, j=>{_optionalChain([t, 'optionalCall', _80 => _80(j)]),j.isDefaultPrevented()||m(p)},[t,m,p]);return _jsxruntime.jsx.call(void 0, "button",{type:"button",...r,"aria-label":o+(l?` (${l})`:""),"aria-live":"polite","frimousse-skin-tone-selector":"",onClick:g,ref:i,children:u.emoji})});function nt({children:e,...t}){let o=x();return C(o,Me)?_jsxruntime.jsx.call(void 0, "span",{"frimousse-loading":"",...t,children:e}):null}function Jt({children:e}){let t=x(),o=C(t,Ae);return e({search:o})}function st({children:e,...t}){let o=x();return C(o,$e)?_jsxruntime.jsx.call(void 0, "span",{"frimousse-empty":"",...t,children:typeof e=="function"?_jsxruntime.jsx.call(void 0, Jt,{children:e}):e}):null}function at({children:e}){let t=ee();return e({emoji:t})}function ct({children:e,emoji:t}){let[o,r,i]=te(t);return e({skinTone:o,setSkinTone:r,skinToneVariations:i})}Ge.displayName="EmojiPicker.Root";Ze.displayName="EmojiPicker.Search";Xe.displayName="EmojiPicker.Viewport";rt.displayName="EmojiPicker.List";nt.displayName="EmojiPicker.Loading";st.displayName="EmojiPicker.Empty";it.displayName="EmojiPicker.SkinToneSelector";at.displayName="EmojiPicker.ActiveEmoji";ct.displayName="EmojiPicker.SkinTone";exports.EmojiPicker = ut; exports.useActiveEmoji = ee; exports.useSkinTone = te;
//# sourceMappingURL=index.cjs.map