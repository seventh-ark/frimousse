"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var dt=Object.defineProperty;var ft=(e,t)=>{for(var o in t)dt(e,o,{get:t[o],enumerable:!0})};var mt={};ft(mt,{ActiveEmoji:()=>ut,Empty:()=>ct,List:()=>nt,Loading:()=>at,Root:()=>Xe,Search:()=>Qe,SkinTone:()=>lt,SkinToneSelector:()=>st,Viewport:()=>et});var _react = require('react');var ee="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif",K=["none","light","medium-light","medium","medium-dark","dark"];function z(e){return e.charAt(0).toUpperCase()+e.slice(1)}var F=2,x=null;function ue(e){try{x??=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch (e2){}if(!x||(queueMicrotask(()=>{x&&(x=null)}),x.canvas.width=F,x.canvas.height=F,x.font=`2px ${ee}`,x.textBaseline="middle",x.measureText(e).width>=F*2))return!1;x.fillStyle="#00f",x.fillText(e,0,0);let t=x.getImageData(0,0,F,F).data;x.clearRect(0,0,F,F),x.fillStyle="#f00",x.fillText(e,0,0);let o=x.getImageData(0,0,F,F).data;for(let r=0;r<F*F*4;r+=4)if(t[r]!==o[r]||t[r+1]!==o[r+1]||t[r+2]!==o[r+2])return!1;return!0}function le(e,t,o){try{let r=e.getItem(t);if(!r)throw new Error(`No value found for "${t}".`);let i=JSON.parse(r);return o(i)}catch (e3){return null}}function me(e,t,o){e.setItem(t,JSON.stringify(o))}function de(e){return t=>t===void 0?void 0:e(t)}function fe(e){return t=>t===null?null:e(t)}function b(e){if(typeof e!="string")throw new Error;return e}function U(e){if(typeof e!="number")throw new Error;return e}function ge(e){if(typeof e!="boolean")throw new Error;return e}function V(e){return t=>{if(typeof t!="object"||t===null)throw new Error;let o={};for(let r in e){let i=t[r];i===void 0&&e[r](void 0),o[r]=e[r](i)}return o}}function te(e){return t=>{if(!Array.isArray(t))throw new Error;return t.length>0&&e(t[0]),t}}var ve=(e,t)=>`${e}/${t}/data.json`,Pe=(e,t)=>`${e}/${t}/messages.json`,pt=["bn","da","de","en-gb","en","es-mx","es","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","vi","zh-hant","zh"],ke="en",be=e=>`frimousse/data/${e}`,ye="frimousse/metadata";async function we(e,t){try{return(await fetch(e,{method:"HEAD",signal:t})).headers.get("etag")}catch (e4){return null}}async function Et(e,t,o){let[{emojis:r,emojisEtag:i},{messages:n,messagesEtag:s}]=await Promise.all([fetch(ve(e,t),{signal:o}).then(async c=>({emojis:await c.json(),emojisEtag:c.headers.get("etag")})),fetch(Pe(e,t),{signal:o}).then(async c=>({messages:await c.json(),messagesEtag:c.headers.get("etag")}))]);return{emojis:r,messages:n,emojisEtag:i,messagesEtag:s}}async function jt(e,t,o){let[r,i]=await Promise.all([we(ve(e,t),o),we(Pe(e,t),o)]);return{emojisEtag:r,messagesEtag:i}}function ht(e){return e.skins?e.skins.filter(o=>typeof o.tone=="number").reduce((o,r)=>{let i=K[r.tone];return o[i]=r.emoji,o},{}):void 0}async function Se(e,t,o){let{emojis:r,emojisEtag:i,messages:n,messagesEtag:s}=await Et(e,t,o),c=n.subgroups.find(l=>l.key==="country-flag"||l.key==="subdivision-flag"),g=n.groups.filter(l=>l.key!=="component"),u=r.filter(l=>"group"in l),f=g.map(l=>({index:l.order,label:z(l.message)})),a=n.skinTones.reduce((l,E)=>(l[E.key]=z(E.message),l),{}),m=u.map(l=>({emoji:l.emoji,category:l.group,version:l.version,label:z(l.label),tags:_nullishCoalesce(l.tags, () => ([])),countryFlag:c&&l.subgroup===c.order||void 0,skins:ht(l)})),p={locale:t,emojis:m,categories:f,skinTones:a};return me(localStorage,be(t),{data:p,metadata:{emojisEtag:i,messagesEtag:s}}),p}function kt(e,t){let o=new Map;for(let s of e)o.has(s.version)||o.set(s.version,s.emoji);let r=[...o.keys()].sort((s,c)=>c-s),i=_nullishCoalesce(r[0], () => (0)),n=ue("\u{1F1EA}\u{1F1FA}");if(typeof t=="number")return{emojiVersion:t,countryFlags:n};for(let s of r){let c=o.get(s);if(ue(c))return{emojiVersion:s,countryFlags:n}}return{emojiVersion:i,countryFlags:n}}var yt=V({emojiVersion:U,countryFlags:ge}),wt=V({data:V({locale:b,emojis:te(V({emoji:b,category:U,label:b,version:U,tags:te(b),countryFlag:de(ge),skins:de(V({light:b,"medium-light":b,medium:b,"medium-dark":b,dark:b}))})),categories:te(V({index:U,label:b})),skinTones:V({light:b,"medium-light":b,medium:b,"medium-dark":b,dark:b})}),metadata:V({emojisEtag:fe(b),messagesEtag:fe(b)})});async function Te({locale:e,emojiVersion:t,emojibaseUrl:o,signal:r}){let i=typeof o=="string"?o:`https://cdn.jsdelivr.net/npm/emojibase-data@${typeof t=="number"?Math.floor(t):"latest"}`,n=le(sessionStorage,ye,yt),s=le(localStorage,be(e),wt),c;if(!s)c=await Se(i,e,r);else if(n)c=s.data;else try{let{emojisEtag:u,messagesEtag:f}=await jt(i,e,r);c=!u||!f||u!==s.metadata.emojisEtag||f!==s.metadata.messagesEtag?await Se(i,e,r):s.data}catch (e5){c=s.data}n??=kt(c.emojis,t),me(sessionStorage,ye,n);let g=c.emojis.filter(u=>{let f=u.version<=n.emojiVersion;return u.countryFlag?f&&n.countryFlags:f});return{locale:e,emojis:g,categories:c.categories,skinTones:c.skinTones}}function pe(e){return pt.includes(e)?e:(console.warn(`Locale "${e}" is not supported, using "${ke}" instead.`),ke)}function Ee(e){return K.includes(e)?e:(console.warn(`Skin tone "${e}" is not valid, using "none" instead.`),"none")}function Ce(e,t){let o=[];if(t<=0)return o;for(let r=0,i=e.length;r<i;r+=t)o.push(e.slice(r,r+t));return o}function St(e,t,o){if(!t&&!o)return e;let r=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _2 => _2.toLowerCase, 'call', _3 => _3(), 'access', _4 => _4.trim, 'call', _5 => _5()]), () => ("")),i=new WeakMap;return e.filter(n=>{if(_optionalChain([o, 'optionalAccess', _6 => _6.includes, 'call', _7 => _7(n.emoji)]))return!1;if(r!==""){let s=0;n.label.toLowerCase().includes(r)&&(s+=10);for(let c of n.tags)c.toLowerCase().includes(r)&&(s+=1);return s>0?(i.set(n,s),!0):!1}return!0}).sort((n,s)=>(_nullishCoalesce(i.get(s), () => (0)))-(_nullishCoalesce(i.get(n), () => (0))))}function xe(e,t,o,r,i){let n=St(e.emojis,r,i),s=[],c=[],g=[],u={},f=0,a=0;for(let m of n)u[m.category]||(u[m.category]=[]),u[m.category].push({emoji:o&&o!=="none"&&m.skins?m.skins[o]:m.emoji,label:m.label,isCustom:m.isCustom,meta:m.meta});for(let m of e.categories){let p=u[m.index];if(!p||p.length===0)continue;let l=Ce(Array.from(p),t).map(E=>({categoryIndex:f,emojis:E}));s.push(...l),c.push({label:m.label,isCustom:m.isCustom,rowsCount:l.length,startRowIndex:a}),g.push(a),f++,a+=l.length}return{count:n.length,categories:c,categoriesStartRowIndices:g,rows:s,skinTones:e.skinTones}}var _jsxruntime = require('react/jsx-runtime');function Le(e){let t={},o=null,r=null,i=new Set,n=()=>{if(o){t=o,o=null;for(let u of i)u(t)}r=null},s=()=>_nullishCoalesce(o, () => (t)),c=u=>{o??=t,Object.assign(o,typeof u=="function"?u(s()):u),r||(r=requestAnimationFrame(n))},g=u=>(i.add(u),()=>i.delete(u));return t=e(c,s),{get:s,set:c,subscribe:g}}function He(e){let[t]=_react.useState.call(void 0, e);return t}function Ie(e){let t=_react.createContext.call(void 0, null);return{useStore:()=>{let i=_react.useContext.call(void 0, t);if(!i)throw new Error(e);return i},Provider:({store:i,children:n})=>_jsxruntime.jsx.call(void 0, t.Provider,{value:i,children:n})}}function H(e,t,o=Object.is){let[r,i]=_react.useState.call(void 0, ()=>t(e.get()));return _react.useEffect.call(void 0, ()=>e.subscribe(()=>{let n=t(e.get());i(s=>o(s,n)?s:n)}),[e,t,o]),_react.useDebugValue.call(void 0, r),r}function I(e,t,o){let r=_react.useCallback.call(void 0, i=>i[t],[t]);return H(e,r,o)}var De=2;function Ae(e,t,o,r,i,n,s,c){let g=0;return Le((u,f)=>({locale:t,columns:o,sticky:r,skinTone:i,excludedEmojis:n,customCategories:s,customEmojis:c,onEmojiSelect:e,data:null,search:"",interaction:"none",activeColumnIndex:0,activeRowIndex:0,rowHeight:null,categoryHeaderHeight:null,viewportWidth:null,viewportHeight:null,viewportCurrentCategoryIndex:null,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0,rootRef:null,searchRef:null,viewportRef:null,listRef:null,updateViewportState:a=>{let m=f(),p=_nullishCoalesce(_optionalChain([a, 'optionalAccess', _8 => _8.data]), () => (m.data)),l=_nullishCoalesce(_optionalChain([a, 'optionalAccess', _9 => _9.categoryHeaderHeight]), () => (m.categoryHeaderHeight)),E=_nullishCoalesce(_optionalChain([a, 'optionalAccess', _10 => _10.rowHeight]), () => (m.rowHeight)),k=_nullishCoalesce(_optionalChain([a, 'optionalAccess', _11 => _11.viewportHeight]), () => (m.viewportHeight));if(!p||p.rows.length===0||!l||!E||!k)return u({...a,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0});let d=0,w=0;for(let A of p.categories)if(w++*l+A.startRowIndex*E<g)d+=l;else break;let C=p.categories.length*l+p.rows.length*E,S=Math.floor(De*E/2),_=Math.ceil(De*E/2),N=Math.min(g-d-S,C-k),W=N+k+_,h=Math.max(0,Math.floor(N/E)),v=Math.min(p.rows.length-1,Math.ceil(W/E)),P=_optionalChain([p, 'access', _12 => _12.rows, 'access', _13 => _13[h], 'optionalAccess', _14 => _14.categoryIndex]);return u(P===void 0&&a?a:{...a,viewportStartCategoryIndex:P,viewportStartRowIndex:h,viewportEndRowIndex:v})},onDataChange:a=>{f().updateViewportState({data:a,activeColumnIndex:0,activeRowIndex:0})},onSearchChange:a=>{u({search:a,interaction:a?"keyboard":"none"})},onActiveEmojiChange:(a,m,p)=>{if(u({interaction:a,activeColumnIndex:m,activeRowIndex:p}),a!=="keyboard")return;let{listRef:l,viewportRef:E,sticky:k,rowHeight:d,viewportHeight:w,categoryHeaderHeight:C}=f(),S=_optionalChain([l, 'optionalAccess', _15 => _15.current]),_=_optionalChain([E, 'optionalAccess', _16 => _16.current]);if(!S||!_||!d||!C||!w)return;let N=p;N===0&&_.scrollTo({top:0,behavior:"instant"});let W=S.querySelector(`[aria-rowindex="${N}"]`);if(!(W instanceof HTMLElement))return;let h=W.offsetTop,v=getComputedStyle(W),P=Number.parseFloat(v.scrollMarginTop),A=Number.parseFloat(v.scrollMarginBottom),D=g+P;k&&h<g+w/2&&(D+=C);let B=D+w-A;(h<D||h+d>B)&&_.scrollTo({top:Math.max(h<D+C?h-Math.max(k?C:0,P):h-w+d+A,0),behavior:"instant"})},onActiveEmojiReset:()=>{u({interaction:"none",activeColumnIndex:0,activeRowIndex:0})},onRowHeightChange:a=>{f().updateViewportState({rowHeight:a})},onCategoryHeaderHeightChange:a=>{f().updateViewportState({categoryHeaderHeight:a})},onViewportSizeChange:(a,m)=>{f().updateViewportState({viewportWidth:a,viewportHeight:m})},onViewportScroll:a=>{g=a,f().updateViewportState()}}))}var{useStore:R,Provider:$e}=Ie("EmojiPicker.Root is missing.");function Me(e){return e.search}function Y(e){return e.interaction==="none"?void 0:_optionalChain([e, 'access', _17 => _17.data, 'optionalAccess', _18 => _18.rows, 'access', _19 => _19[e.activeRowIndex], 'optionalAccess', _20 => _20.emojis, 'access', _21 => _21[e.activeColumnIndex]])}function Fe(e){return e.data===void 0||typeof _optionalChain([e, 'access', _22 => _22.data, 'optionalAccess', _23 => _23.count])=="number"&&e.data.count===0}function Ve(e){return e.data===null||e.viewportHeight===null||e.rowHeight===null||e.categoryHeaderHeight===null}function je(e){return _optionalChain([e, 'access', _24 => _24.data, 'optionalAccess', _25 => _25.rows, 'access', _26 => _26.length])}function Oe(e){return _optionalChain([e, 'access', _27 => _27.data, 'optionalAccess', _28 => _28.categories, 'access', _29 => _29.length])}function _e(e){return _optionalChain([e, 'access', _30 => _30.data, 'optionalAccess', _31 => _31.categoriesStartRowIndices])}function Ne(e){return _optionalChain([e, 'access', _32 => _32.data, 'optionalAccess', _33 => _33.skinTones])}function he(e,t){return _optionalChain([e, 'optionalAccess', _34 => _34.emoji])===_optionalChain([t, 'optionalAccess', _35 => _35.emoji])}function We(e,t){return _optionalChain([e, 'optionalAccess', _36 => _36.categoryIndex])!==_optionalChain([t, 'optionalAccess', _37 => _37.categoryIndex])||_optionalChain([e, 'optionalAccess', _38 => _38.emojis, 'access', _39 => _39.length])!==_optionalChain([t, 'optionalAccess', _40 => _40.emojis, 'access', _41 => _41.length])?!1:!!_optionalChain([e, 'optionalAccess', _42 => _42.emojis, 'access', _43 => _43.every, 'call', _44 => _44((o,r)=>he(o,_optionalChain([t, 'optionalAccess', _45 => _45.emojis, 'access', _46 => _46[r]])))])}var J="\u200D",ze=/\p{Emoji_Modifier_Base}/u,Rt=/\uFE0F$/,Lt=/\u{1F3FB}|\u{1F3FC}|\u{1F3FD}|\u{1F3FE}|\u{1F3FF}/gu,Ht={light:"\u{1F3FB}","medium-light":"\u{1F3FC}",medium:"\u{1F3FD}","medium-dark":"\u{1F3FE}",dark:"\u{1F3FF}"};function It(e,t){if(!e.split(J).some(r=>ze.test(r)))return e;let o=e.split(J).map(r=>r.replace(Lt,"")).join(J);return t==="none"?o:o.split(J).map((r,i,n)=>{let s=n.length>1;return!ze.test(r)||s&&r==="\u{1F91D}"?r:r.replace(Rt,"")+Ht[t]}).join(J)}function Be(e){return K.map(t=>({skinTone:t,emoji:It(e,t)}))}function oe(){let e=R(),t=H(e,Y,he);return _react.useDeferredValue.call(void 0, t)}function re(e="\u270B"){let t=R(),o=I(t,"skinTone"),r=_react.useMemo.call(void 0, ()=>Be(e),[e]),i=_react.useCallback.call(void 0, n=>{t.set({skinTone:n})},[]);return[o,i,r]}function ie(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||typeof t!="object"||e===null||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let o=Object.keys(e),r=Object.keys(t);return o.length!==r.length?!1:o.every(i=>i in t&&e[i]===t[i])}function Ke(...e){}function Ue(e,t){let o=null;if(typeof window.requestIdleCallback=="function")o=window.requestIdleCallback(e,t);else{let r=Date.now();o=window.setTimeout(()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,(_nullishCoalesce(_optionalChain([t, 'optionalAccess', _47 => _47.timeout]), () => (50)))-(Date.now()-r))})},10)}return()=>{typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(o):window.clearTimeout(o)}}var L=typeof window<"u"?_react.useLayoutEffect:_react.useEffect;function Ye(e){let t=_react.useRef.call(void 0, e);return L(()=>{t.current=e}),_react.useCallback.call(void 0, (...o)=>t.current(...o),[])}function Nt({emojiVersion:e,emojibaseUrl:t}){let[o,r]=_react.useState.call(void 0, void 0),i=R(),n=I(i,"locale"),s=I(i,"columns"),c=I(i,"skinTone"),g=I(i,"search"),u=I(i,"excludedEmojis"),f=I(i,"customCategories"),a=I(i,"customEmojis");return _react.useEffect.call(void 0, ()=>{let m=new AbortController,p=m.signal;return Te({locale:n,emojiVersion:e,emojibaseUrl:t,signal:p}).then(l=>{if(f===void 0&&a===void 0)return r(l);let E;f!==void 0&&f.length!==0?(E=f.map(d=>({index:d.index,label:z(d.label),isCustom:!0})),E=E.concat(l.categories)):E=l.categories;let k;a!==void 0&&a.length!==0?(k=a.map(d=>({emoji:d.emoji,category:d.category,version:0,label:z(d.label),tags:_nullishCoalesce(d.tags, () => ([])),countryFlag:void 0,skins:void 0,isCustom:!0,meta:d.meta})),k=k.concat(l.emojis)):k=l.emojis,r({...l,categories:E,emojis:k})}).catch(l=>{p.aborted||console.error(l)}),()=>{m.abort()}},[e,t,n,f,a]),_react.useEffect.call(void 0, ()=>{if(o)return Ue(()=>{i.get().onDataChange(xe(o,s,c,g,u))},{timeout:100})},[o,s,c,g,u]),null}var Xe=_react.forwardRef.call(void 0, ({locale:e="en",columns:t=9,skinTone:o="none",onEmojiSelect:r=Ke,emojiVersion:i,emojibaseUrl:n,onFocusCapture:s,onBlurCapture:c,children:g,style:u,sticky:f=!0,excludedEmojis:a,customCategories:m,customEmojis:p,...l},E)=>{let k=Ye(r),d=He(()=>Ae(k,pe(e),t,f,Ee(o),a,m,p)),[w,C]=_react.useState.call(void 0, !1),S=_react.useRef.call(void 0, null),_=_react.useCallback.call(void 0, h=>{h&&(S.current=h,d.set({rootRef:S}))},[]);L(()=>{d.set({locale:pe(e)})},[e]),L(()=>{d.set({columns:t})},[t]),L(()=>{d.set({sticky:f})},[f]),L(()=>{d.set({skinTone:Ee(o)})},[o]),L(()=>{d.set({excludedEmojis:a})},[a]),L(()=>{d.set({customCategories:m})},[m]),L(()=>{d.set({customEmojis:p})},[p]);let N=_react.useCallback.call(void 0, h=>{_optionalChain([s, 'optionalCall', _48 => _48(h)]);let{searchRef:v,viewportRef:P}=d.get(),A=h.target===_optionalChain([v, 'optionalAccess', _49 => _49.current])||h.target.hasAttribute("frimousse-search"),D=h.target===_optionalChain([P, 'optionalAccess', _50 => _50.current])||h.target.hasAttribute("frimousse-viewport");h.isDefaultPrevented()||(C(A||D),h.isDefaultPrevented()||(C(A||D),D?d.get().onActiveEmojiChange("keyboard",0,0):A&&d.get().search===""&&d.set({interaction:"none"})))},[s]),W=_react.useCallback.call(void 0, h=>{_optionalChain([c, 'optionalCall', _51 => _51(h)]),!h.isDefaultPrevented()&&!h.currentTarget.contains(h.relatedTarget)&&C(!1)},[c]);return L(()=>{w||d.get().onActiveEmojiReset()},[w]),_react.useImperativeHandle.call(void 0, E,()=>S.current),_react.useEffect.call(void 0, ()=>{if(!w)return;function h(v){if(v.defaultPrevented||!v.key.startsWith("Arrow")&&v.key!=="Enter")return;let{data:P,onEmojiSelect:A,onActiveEmojiChange:D,interaction:B,activeColumnIndex:X,activeRowIndex:Q}=d.get();if(v.key==="Enter"){let T=Y(d.get());T&&(v.preventDefault(),A(T))}if(v.key.startsWith("Arrow")){let T=X,y=Q;if(v.preventDefault(),B!=="none"){if(_optionalChain([P, 'optionalAccess', _52 => _52.rows])&&P.rows.length>0)switch(v.key){case"ArrowLeft":{if(T===0){let $=y-1,ce=P.rows[$];ce&&(y=$,T=ce.emojis.length-1)}else T-=1;break}case"ArrowRight":{if(T===P.rows[y].emojis.length-1){let $=y+1;P.rows[$]&&(y=$,T=0)}else T+=1;break}case"ArrowUp":{let $=P.rows[y-1];$&&(y-=1,$.emojis[T]||(T=$.emojis.length-1));break}case"ArrowDown":{let $=P.rows[y+1];$&&(y+=1,$.emojis[T]||(T=$.emojis.length-1));break}}D("keyboard",T,y)}else D("keyboard",0,0)}}return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[w]),L(()=>{let h=null,v=null,P=null,A=null,D=d.subscribe(y=>{S.current&&(h!==y.viewportWidth&&(h=y.viewportWidth,S.current.style.setProperty("--frimousse-viewport-width",`${y.viewportWidth}px`)),v!==y.viewportHeight&&(v=y.viewportHeight,S.current.style.setProperty("--frimousse-viewport-height",`${y.viewportHeight}px`)),P!==y.rowHeight&&(P=y.rowHeight,S.current.style.setProperty("--frimousse-row-height",`${y.rowHeight}px`)),A!==y.categoryHeaderHeight&&(A=y.categoryHeaderHeight,S.current.style.setProperty("--frimousse-category-header-height",`${y.categoryHeaderHeight}px`)))}),{viewportWidth:B,viewportHeight:X,rowHeight:Q,categoryHeaderHeight:T}=d.get();return B&&S.current.style.setProperty("--frimousse-viewport-width",`${B}px`),X&&S.current.style.setProperty("--frimousse-viewport-height",`${X}px`),Q&&S.current.style.setProperty("--frimousse-row-height",`${Q}px`),T&&S.current.style.setProperty("--frimousse-category-header-height",`${T}px`),D},[]),_jsxruntime.jsx.call(void 0, "div",{"data-focused":w?"":void 0,"frimousse-root":"",onBlurCapture:W,onFocusCapture:N,...l,ref:_,style:{"--frimousse-emoji-font":ee,...u},children:_jsxruntime.jsxs.call(void 0, $e,{store:d,children:[_jsxruntime.jsx.call(void 0, Nt,{emojibaseUrl:n,emojiVersion:i}),g]})})}),Qe=_react.forwardRef.call(void 0, ({value:e,defaultValue:t,onChange:o,...r},i)=>{let n=R(),s=_react.useRef.call(void 0, null),c=_react.useCallback.call(void 0, a=>{a&&(s.current=a,n.set({searchRef:s}))},[]),g=typeof e=="string",u=_react.useRef.call(void 0, g);_react.useEffect.call(void 0, ()=>{process.env.NODE_ENV!=="production"&&u.current!==g&&console.warn(`EmojiPicker.Search is changing from ${u?"controlled":"uncontrolled"} to ${g?"controlled":"uncontrolled"}.`),u.current=g},[g]),L(()=>{n.set({search:typeof e=="string"?e:typeof t=="string"?t:""})},[]),L(()=>{typeof e=="string"&&n.get().onSearchChange(e)},[e]);let f=_react.useCallback.call(void 0, a=>{_optionalChain([o, 'optionalCall', _53 => _53(a)]),a.isDefaultPrevented()||n.get().onSearchChange(a.target.value)},[o]);return _react.useImperativeHandle.call(void 0, i,()=>s.current),_jsxruntime.jsx.call(void 0, "input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",enterKeyHint:"done","frimousse-search":"",placeholder:"Search\u2026",spellCheck:!1,type:"search",...r,defaultValue:t,onChange:f,ref:c,value:e})}),Wt=_react.memo.call(void 0, ()=>{let e=oe();return e?_jsxruntime.jsx.call(void 0, "div",{"aria-live":"polite",style:{border:0,clip:"rect(0, 0, 0, 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1,wordWrap:"normal"},children:e.label}):null}),et=_react.forwardRef.call(void 0, ({children:e,onScroll:t,onKeyDown:o,style:r,...i},n)=>{let s=R(),c=_react.useRef.call(void 0, null),g=_react.useCallback.call(void 0, m=>{m&&(c.current=m,s.set({viewportRef:c}))},[]),u=H(s,je),f=H(s,Oe),a=_react.useCallback.call(void 0, m=>{_optionalChain([t, 'optionalCall', _54 => _54(m)]),s.get().onViewportScroll(m.currentTarget.scrollTop)},[t]);return L(()=>{if(!c.current)return;let m=new ResizeObserver(([p])=>{let l=_nullishCoalesce(_optionalChain([p, 'optionalAccess', _55 => _55.borderBoxSize, 'access', _56 => _56[0], 'optionalAccess', _57 => _57.inlineSize]), () => (0)),E=_nullishCoalesce(_optionalChain([p, 'optionalAccess', _58 => _58.borderBoxSize, 'access', _59 => _59[0], 'optionalAccess', _60 => _60.blockSize]), () => (0)),{onViewportSizeChange:k,viewportHeight:d,viewportWidth:w}=s.get();(d!==E||w!==l)&&k(l,E)});return m.observe(c.current),s.get().onViewportSizeChange(c.current.offsetWidth,c.current.clientHeight),()=>{m.disconnect()}},[]),_react.useImperativeHandle.call(void 0, n,()=>c.current),_jsxruntime.jsxs.call(void 0, "div",{"frimousse-viewport":"",...i,onScroll:a,ref:g,style:{position:"relative",boxSizing:"border-box",contain:"layout paint",containIntrinsicSize:typeof u=="number"&&typeof f=="number"?`var(--frimousse-viewport-width, auto) calc(${u} * var(--frimousse-row-height) + ${f} * var(--frimousse-category-header-height))`:void 0,overflowY:"auto",overscrollBehavior:"contain",scrollbarGutter:"stable",willChange:"scroll-position",...r},children:[_jsxruntime.jsx.call(void 0, Wt,{}),e]})});function tt(e,t,o){return{emoji:{...e,isActive:o},role:"gridcell","aria-colindex":t,"aria-selected":o||void 0,"aria-label":e.label,"data-active":o?"":void 0,"frimousse-emoji":"",style:{fontFamily:"var(--frimousse-emoji-font)"},tabIndex:-1}}function ot(e,t=!1){return{role:t?void 0:"row","aria-rowindex":t?void 0:e,"frimousse-row":"",style:{contain:t?void 0:"content",height:t?void 0:"var(--frimousse-row-height)",display:"flex"}}}function rt(e,t){return{"frimousse-category":"",style:{contain:"content",top:t?`calc(${e} * var(--frimousse-category-header-height) + ${t.startRowIndex} * var(--frimousse-row-height))`:void 0,height:t?`calc(var(--frimousse-category-header-height) + ${t.rowsCount} * var(--frimousse-row-height))`:void 0,width:"100%",pointerEvents:"none",position:"absolute"}}}function it(e,t=!1,o=!0){return{category:e,"frimousse-category-header":"",style:{contain:t?void 0:"layout paint",height:t?void 0:"var(--frimousse-category-header-height)",pointerEvents:"auto",position:o?"sticky":void 0,top:0}}}function Je(e,t,o,r){return{"frimousse-list-sizer":"",style:{position:"relative",boxSizing:"border-box",height:`calc(${e} * var(--frimousse-row-height) + ${t} * var(--frimousse-category-header-height))`,paddingTop:`calc(${o} * var(--frimousse-row-height) + ${r} * var(--frimousse-category-header-height))`}}}function qe(e,t,o){return{"aria-colcount":e,"aria-rowcount":t,"frimousse-list":"",style:{"--frimousse-list-columns":e,...o},role:"grid"}}function zt(e){e.preventDefault()}var Bt=_react.memo.call(void 0, ({Emoji:e,emoji:t,columnIndex:o,rowIndex:r})=>{let i=R(),n=H(i,u=>_optionalChain([Y, 'call', _61 => _61(u), 'optionalAccess', _62 => _62.emoji])===t.emoji),s=_react.useCallback.call(void 0, ()=>{i.get().onEmojiSelect(t)},[t]),c=_react.useCallback.call(void 0, ()=>{i.get().onActiveEmojiChange("pointer",o,r)},[o,r]),g=_react.useCallback.call(void 0, ()=>{i.get().onActiveEmojiReset()},[]);return _jsxruntime.jsx.call(void 0, e,{...tt(t,o,n),onClick:s,onPointerDown:zt,onPointerEnter:c,onPointerLeave:g})}),Kt=_react.memo.call(void 0, ({Row:e,Emoji:t,rowIndex:o})=>{let r=R(),i=H(r,n=>_optionalChain([n, 'access', _63 => _63.data, 'optionalAccess', _64 => _64.rows, 'access', _65 => _65[o]]),We);return i?_jsxruntime.jsx.call(void 0, e,{...ot(o),children:i.emojis.map((n,s)=>_jsxruntime.jsx.call(void 0, Bt,{columnIndex:s,Emoji:t,emoji:n,rowIndex:o},n.label))}):null}),Ut=_react.memo.call(void 0, ({CategoryHeader:e,categoryIndex:t})=>{let o=R(),r=H(o,n=>_optionalChain([n, 'access', _66 => _66.data, 'optionalAccess', _67 => _67.categories, 'access', _68 => _68[t]]),ie),i=I(o,"sticky");return r?_jsxruntime.jsx.call(void 0, "div",{...rt(t,r),children:_jsxruntime.jsx.call(void 0, e,{...it({label:r.label,isCustom:r.isCustom},!1,i)})}):null}),Ge=_react.memo.call(void 0, ({CategoryHeader:e,Row:t,Emoji:o})=>{let r=_react.useRef.call(void 0, null),i=R(),n=I(i,"columns"),s=_react.useMemo.call(void 0, ()=>Array(n).fill({emoji:"\u{1F642}",label:""}),[n]),c=_react.useMemo.call(void 0, ()=>({label:"Category"}),[]),g=_react.useRef.call(void 0, null),u=_react.useRef.call(void 0, null);return L(()=>{let f=_optionalChain([r, 'access', _69 => _69.current, 'optionalAccess', _70 => _70.parentElement, 'optionalAccess', _71 => _71.parentElement]);if(!f||!g.current||!u.current)return;let a=new ResizeObserver(l=>{for(let E of l){let k=E.contentRect.height,{onRowHeightChange:d,onCategoryHeaderHeightChange:w,rowHeight:C,categoryHeaderHeight:S}=i.get();E.target===g.current&&C!==k&&d(k),E.target===u.current&&S!==k&&w(k)}});a.observe(f),a.observe(g.current),a.observe(u.current);let{onRowHeightChange:m,onCategoryHeaderHeightChange:p}=i.get();return m(g.current.clientHeight),p(u.current.clientHeight),()=>{a.disconnect()}},[]),_jsxruntime.jsxs.call(void 0, "div",{"aria-hidden":!0,ref:r,style:{height:0,visibility:"hidden"},children:[_jsxruntime.jsx.call(void 0, "div",{"frimousse-row-sizer":"",ref:g,children:_jsxruntime.jsx.call(void 0, t,{...ot(-1,!0),children:s.map((f,a)=>_jsxruntime.jsx.call(void 0, o,{...tt(f,a,!1)},a))})}),_jsxruntime.jsx.call(void 0, "div",{...rt(-1),children:_jsxruntime.jsx.call(void 0, "div",{"frimousse-category-header-sizer":"",ref:u,children:_jsxruntime.jsx.call(void 0, e,{...it(c,!0)})})})]})});function Yt({category:e,...t}){return _jsxruntime.jsx.call(void 0, "div",{...t,children:e.label})}function Jt({emoji:e,...t}){return _jsxruntime.jsx.call(void 0, "button",{type:"button",...t,children:e.isCustom===!0?_jsxruntime.jsx.call(void 0, "img",{alt:e.label,src:e.emoji}):e.emoji})}function qt({...e}){return _jsxruntime.jsx.call(void 0, "div",{...e})}var nt=_react.forwardRef.call(void 0, ({style:e,components:t,...o},r)=>{let i=R(),n=_react.useRef.call(void 0, null),s=_react.useCallback.call(void 0, d=>{d&&(n.current=d,i.set({listRef:n}))},[]),c=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _72 => _72.CategoryHeader]), () => (Yt)),g=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _73 => _73.Emoji]), () => (Jt)),u=_nullishCoalesce(_optionalChain([t, 'optionalAccess', _74 => _74.Row]), () => (qt)),f=I(i,"columns"),a=I(i,"viewportStartRowIndex"),m=I(i,"viewportEndRowIndex"),p=H(i,je),l=H(i,_e,ie),E=_react.useMemo.call(void 0, ()=>_nullishCoalesce(_optionalChain([l, 'optionalAccess', _75 => _75.filter, 'call', _76 => _76(d=>d<a), 'access', _77 => _77.length]), () => (0)),[l,a]),k=_nullishCoalesce(_optionalChain([l, 'optionalAccess', _78 => _78.length]), () => (0));return _react.useImperativeHandle.call(void 0, r,()=>n.current),!p||!l||k===0?_jsxruntime.jsx.call(void 0, "div",{...qe(f,0,e),...o,children:_jsxruntime.jsx.call(void 0, "div",{...Je(0,0,0,0),children:_jsxruntime.jsx.call(void 0, Ge,{CategoryHeader:c,Emoji:g,Row:u})})}):_jsxruntime.jsx.call(void 0, "div",{...qe(f,p,e),...o,ref:s,children:_jsxruntime.jsxs.call(void 0, "div",{...Je(p,k,a,E),children:[_jsxruntime.jsx.call(void 0, Ge,{CategoryHeader:c,Emoji:g,Row:u}),Array.from({length:m-a+1},(d,w)=>{let C=a+w,S=l.indexOf(C);return _jsxruntime.jsxs.call(void 0, _react.Fragment,{children:[S>=0&&_jsxruntime.jsx.call(void 0, "div",{style:{height:"var(--frimousse-category-header-height)"}}),_jsxruntime.jsx.call(void 0, Kt,{Emoji:g,Row:u,rowIndex:C})]},C)}),Array.from({length:k},(d,w)=>_jsxruntime.jsx.call(void 0, Ut,{CategoryHeader:c,categoryIndex:w},w))]})})}),st=_react.forwardRef.call(void 0, ({emoji:e,onClick:t,"aria-label":o="Change skin tone",...r},i)=>{let n=R(),s=H(n,Ne,ie),[c,g,u]=re(e),f=_react.useMemo.call(void 0, ()=>Math.max(0,u.findIndex(k=>k.skinTone===c)),[c,u]),a=u[f],p=u[(f+1)%u.length].skinTone,l=p==="none"?void 0:_optionalChain([s, 'optionalAccess', _79 => _79[p]]),E=_react.useCallback.call(void 0, k=>{_optionalChain([t, 'optionalCall', _80 => _80(k)]),k.isDefaultPrevented()||g(p)},[t,g,p]);return _jsxruntime.jsx.call(void 0, "button",{type:"button",...r,"aria-label":o+(l?` (${l})`:""),"aria-live":"polite","frimousse-skin-tone-selector":"",onClick:E,ref:i,children:a.emoji})});function at({children:e,...t}){let o=R();return H(o,Ve)?_jsxruntime.jsx.call(void 0, "span",{"frimousse-loading":"",...t,children:e}):null}function Gt({children:e}){let t=R(),o=H(t,Me);return e({search:o})}function ct({children:e,...t}){let o=R();return H(o,Fe)?_jsxruntime.jsx.call(void 0, "span",{"frimousse-empty":"",...t,children:typeof e=="function"?_jsxruntime.jsx.call(void 0, Gt,{children:e}):e}):null}function ut({children:e}){let t=oe();return e({emoji:t})}function lt({children:e,emoji:t}){let[o,r,i]=re(t);return e({skinTone:o,setSkinTone:r,skinToneVariations:i})}Xe.displayName="EmojiPicker.Root";Qe.displayName="EmojiPicker.Search";et.displayName="EmojiPicker.Viewport";nt.displayName="EmojiPicker.List";at.displayName="EmojiPicker.Loading";ct.displayName="EmojiPicker.Empty";st.displayName="EmojiPicker.SkinToneSelector";ut.displayName="EmojiPicker.ActiveEmoji";lt.displayName="EmojiPicker.SkinTone";exports.EmojiPicker = mt; exports.useActiveEmoji = oe; exports.useSkinTone = re;
//# sourceMappingURL=index.cjs.map